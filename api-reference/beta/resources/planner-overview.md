---
title: 使用 Planner REST API
description: 可以使用 Microsoft Graph 中的 Planner API 创建任务，并将其分配给 Microsoft 365 中某个群组的用户。
author: TarkanSevilmis
localization_priority: Priority
ms.prod: planner
doc_type: conceptualPageType
ms.openlocfilehash: 8b2001915b5c63817c6826c0a0b175b0bb70ff82
ms.sourcegitcommit: 1d2adc4062c8e83d23768682cf66a731bccd313c
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/16/2021
ms.locfileid: "49882771"
---
# <a name="use-the-planner-rest-api"></a><span data-ttu-id="f92ca-103">使用 Planner REST API</span><span class="sxs-lookup"><span data-stu-id="f92ca-103">Use the Planner REST API</span></span>

[!INCLUDE [beta-disclaimer](../../includes/beta-disclaimer.md)]

<span data-ttu-id="f92ca-104">可以使用 Microsoft Graph 中的 Planner API 创建任务，并将其分配给 Microsoft 365 中某个群组的用户。</span><span class="sxs-lookup"><span data-stu-id="f92ca-104">You can use the Planner API in Microsoft Graph to create tasks and assign them to users in a group in Microsoft 365.</span></span>

<span data-ttu-id="f92ca-105">在开始使用 Planner API 之前，了解主对象相互之间以及与 Microsoft 365 组之间的关系将会有所帮助。</span><span class="sxs-lookup"><span data-stu-id="f92ca-105">Before you get started with the Planner API, it will be helpful to understand how the main objects relate to each other as well as to Microsoft 365 groups.</span></span>

## <a name="plan-containers"></a><span data-ttu-id="f92ca-106">Plan 容器</span><span class="sxs-lookup"><span data-stu-id="f92ca-106">Plan containers</span></span>
<span data-ttu-id="f92ca-107">在 Planner 中，计划总是包含在另一个资源中。</span><span class="sxs-lookup"><span data-stu-id="f92ca-107">In Planner, plans are always contained by another resource.</span></span> <span data-ttu-id="f92ca-108">包含的资源决定了计划和其中所有任务的授权规则，以及计划的生命周期。</span><span class="sxs-lookup"><span data-stu-id="f92ca-108">The containing resource determines the authoization rules of the plan and all the tasks in it, as well as the lifecycle of the plan.</span></span> <span data-ttu-id="f92ca-109">例如，对于 Microsoft 365 组包含的计划，组成员可以在计划中创建、编辑、解析和删除任务，还可以更改某些计划级属性（例如计划名称或标签名称）。</span><span class="sxs-lookup"><span data-stu-id="f92ca-109">For example, for plans contained by Microsoft 365 groups, group members will be able to create, edit, resolve, and delete tasks in the plan, as well as changing some plan-level properties, such as the name of the plan or label names.</span></span> <span data-ttu-id="f92ca-110">另外，删除组时，会自动删除组中的所有计划，如果恢复组，则会自动恢复所有计划。</span><span class="sxs-lookup"><span data-stu-id="f92ca-110">Additionally, when the group is deleted, all the plans in the group are automatically deleted, or if a group is restored, all the plans will be automatically restored.</span></span>

<span data-ttu-id="f92ca-111">最常见的容器类型是 Microsoft 365 组。</span><span class="sxs-lookup"><span data-stu-id="f92ca-111">The most common type of container is a Microsoft 365 group.</span></span>

### <a name="container-type-microsoft-365-groups"></a><span data-ttu-id="f92ca-112">容器类型：Microsoft 365 组</span><span class="sxs-lookup"><span data-stu-id="f92ca-112">Container type: Microsoft 365 groups</span></span>

<span data-ttu-id="f92ca-113">计划通常包含在 Planner API 中的 Microsoft 365 组中。</span><span class="sxs-lookup"><span data-stu-id="f92ca-113">Plans are commonly contained in Microsoft 365 groups in the Planner API.</span></span>
<span data-ttu-id="f92ca-114">若要[获取组所有的计划](../api/plannergroup-list-plans.md)，请发出以下 HTTP 请求。</span><span class="sxs-lookup"><span data-stu-id="f92ca-114">To [get the plans owned by a group](../api/plannergroup-list-plans.md), make the following HTTP request.</span></span>

``` http
GET /groups/{group-id}/planner/plans
```

<span data-ttu-id="f92ca-115">[创建新计划](../api/planner-post-plans.md)时，通过在计划对象上设置 `container` 属性，可使组成为其容器。</span><span class="sxs-lookup"><span data-stu-id="f92ca-115">When [creating a new plan](../api/planner-post-plans.md), make a group its container by setting the `container` property on a plan object.</span></span> <span data-ttu-id="f92ca-116">计划必须包含在支持的资源中。</span><span class="sxs-lookup"><span data-stu-id="f92ca-116">Plans must be contained by a supported resource.</span></span>

><span data-ttu-id="f92ca-117">**注意：** 正在创建计划的用户必须是将包含计划的组的成员。</span><span class="sxs-lookup"><span data-stu-id="f92ca-117">**Note:** The user who is creating the plan must be a member of the group that will contain the plan.</span></span> <span data-ttu-id="f92ca-118">使用“[创建组](../api/group-post-groups.md)”创建新组时，系统不会将你添加为组成员。</span><span class="sxs-lookup"><span data-stu-id="f92ca-118">When you create a new group by using [Create group](../api/group-post-groups.md), you are not added to the group as a member.</span></span> <span data-ttu-id="f92ca-119">创建组后，使用“[组帖子成员](../api/group-post-members.md)”将自己添加为成员。</span><span class="sxs-lookup"><span data-stu-id="f92ca-119">After the group is created, add yourself as a member by using [group post members](../api/group-post-members.md).</span></span>

## <a name="plans"></a><span data-ttu-id="f92ca-120">计划</span><span class="sxs-lookup"><span data-stu-id="f92ca-120">Plans</span></span>

<span data-ttu-id="f92ca-121">[计划](plannerplan.md)是[任务](plannertask.md)的容器。</span><span class="sxs-lookup"><span data-stu-id="f92ca-121">[Plans](plannerplan.md) are the containers of [tasks](plannertask.md).</span></span>
<span data-ttu-id="f92ca-122">若要[在计划中创建一个任务](../api/planner-post-tasks.md)，在创建任务时，将任务对象中的 `planId` 属性设置为计划的 ID。</span><span class="sxs-lookup"><span data-stu-id="f92ca-122">To [create a task in a plan](../api/planner-post-tasks.md), set the `planId` property on the task object to the ID of the plan while creating the task.</span></span>
<span data-ttu-id="f92ca-123">目前无法在没有计划的情况下创建任务。</span><span class="sxs-lookup"><span data-stu-id="f92ca-123">Tasks currently cannot be created without plans.</span></span>
<span data-ttu-id="f92ca-124">若要[检索计划的任务](../api/plannerplan-list-tasks.md)，请发出以下 HTTP 请求。</span><span class="sxs-lookup"><span data-stu-id="f92ca-124">To [retrieve the tasks in a plan](../api/plannerplan-list-tasks.md), make the following HTTP request.</span></span>

``` http
GET /planner/plans/{plan-id}/tasks
```

## <a name="tasks"></a><span data-ttu-id="f92ca-125">任务</span><span class="sxs-lookup"><span data-stu-id="f92ca-125">Tasks</span></span>

<span data-ttu-id="f92ca-p106">可以通过在任务对象的 [assignments](plannerassignments.md) 属性中添加[分配](plannerassignment.md)将每个任务分配给一位用户。要分配任务的用户 ID 是 `assignments` 上的开放属性的名称，且必须指定分配上的 `orderHint` 属性。</span><span class="sxs-lookup"><span data-stu-id="f92ca-p106">Each task can be assigned to a user by adding an [assignment](plannerassignment.md) in the [assignments](plannerassignments.md) property on the task object. The ID of the user to assign the task is the name of the open property on `assignments`, and the `orderHint` property on the assignment must be specified.</span></span>

## <a name="task-and-plan-details"></a><span data-ttu-id="f92ca-128">任务和计划详细信息</span><span class="sxs-lookup"><span data-stu-id="f92ca-128">Task and plan details</span></span>

<span data-ttu-id="f92ca-p107">Planner 资源会排列到基本对象和详细对象中。基本对象提供对适合列表视图的资源的通用属性的访问权限，而详细对象提供对适合深化视图的资源的大型属性的访问权限。</span><span class="sxs-lookup"><span data-stu-id="f92ca-p107">Planner resources are arranged into basic objects and detail objects. Basic objects provide access to common properties of the resources, suitable for list views, while the detail objects provide access to large properties of the resources suitable for drill down views.</span></span>

## <a name="visualization"></a><span data-ttu-id="f92ca-131">可视化</span><span class="sxs-lookup"><span data-stu-id="f92ca-131">Visualization</span></span>

<span data-ttu-id="f92ca-132">除任务和计划数据外，Planner API 还能提供资源，以便跨客户端创建数据的常见可视化。</span><span class="sxs-lookup"><span data-stu-id="f92ca-132">Aside from task and plan data, the Planner API also provides resources for creating a common visualization of data across clients.</span></span> <span data-ttu-id="f92ca-133">有几种类型的可视化数据可用于如下表中所列的任务。</span><span class="sxs-lookup"><span data-stu-id="f92ca-133">Several types of visualization data are available for tasks, as listed in the following table.</span></span>

| <span data-ttu-id="f92ca-134">任务如下所示</span><span class="sxs-lookup"><span data-stu-id="f92ca-134">Tasks are shown as</span></span>                                                                        | <span data-ttu-id="f92ca-135">使用以下信息对任务进行排序</span><span class="sxs-lookup"><span data-stu-id="f92ca-135">Tasks are ordered with information from</span></span>                                         |
| :---------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------ |
| <span data-ttu-id="f92ca-136">简单列表（计划中的任务）</span><span class="sxs-lookup"><span data-stu-id="f92ca-136">Flat list (tasks in a plan)</span></span>                                                               | <span data-ttu-id="f92ca-137">任务的 `orderHint` 属性</span><span class="sxs-lookup"><span data-stu-id="f92ca-137">`orderHint` property on tasks</span></span>                                                   |
| <span data-ttu-id="f92ca-138">简单列表（分配给用户的任务）</span><span class="sxs-lookup"><span data-stu-id="f92ca-138">Flat list (tasks assigned to a user)</span></span>                                                      | <span data-ttu-id="f92ca-139">任务的 `assigneePriority` 属性</span><span class="sxs-lookup"><span data-stu-id="f92ca-139">`assigneePriority` property on tasks</span></span>                                            |
| <span data-ttu-id="f92ca-140">包含受理人列的板块视图（分配给任务板块）</span><span class="sxs-lookup"><span data-stu-id="f92ca-140">Board view with columns for assignees (assigned to task board)</span></span>                            | <span data-ttu-id="f92ca-141">[assignedToTaskBoardTaskFormat](plannerassignedtotaskboardtaskformat.md) 对象</span><span class="sxs-lookup"><span data-stu-id="f92ca-141">[assignedToTaskBoardTaskFormat](plannerassignedtotaskboardtaskformat.md) object</span></span> |
| <span data-ttu-id="f92ca-142">包含针对完成情况的任务进度列的板块视图（进度任务板块）</span><span class="sxs-lookup"><span data-stu-id="f92ca-142">Board view with columns for progress of the task towards completion (progress task board)</span></span> | <span data-ttu-id="f92ca-143">[progressTaskBoardTaskFormat](plannerprogresstaskboardtaskformat.md) 对象</span><span class="sxs-lookup"><span data-stu-id="f92ca-143">[progressTaskBoardTaskFormat](plannerprogresstaskboardtaskformat.md) object</span></span>     |
| <span data-ttu-id="f92ca-144">包含任务自定义列的板块视图（存储桶任务板块）</span><span class="sxs-lookup"><span data-stu-id="f92ca-144">Board view with custom columns of tasks (bucket task board):</span></span>                              | <span data-ttu-id="f92ca-145">[bucketTaskBoardTaskFormat](plannerbuckettaskboardtaskformat.md) 对象</span><span class="sxs-lookup"><span data-stu-id="f92ca-145">[bucketTaskBoardTaskFormat](plannerbuckettaskboardtaskformat.md) object</span></span>         |

<span data-ttu-id="f92ca-146">存储桶任务板块中的自定义栏由 [bucket](plannerbucket.md) 对象表示，其顺序由对象的 `orderHint` 属性表示。</span><span class="sxs-lookup"><span data-stu-id="f92ca-146">The custom columns in the bucket task board are represented by [bucket](plannerbucket.md) objects, and their order by `orderHint` property on the object.</span></span>

<span data-ttu-id="f92ca-147">所有排序均由 [Planner 顺序提示](planner-order-hint-format.md)中介绍的原则指定。</span><span class="sxs-lookup"><span data-stu-id="f92ca-147">All the ordering is controlled by the principles described in [Planner order hints](planner-order-hint-format.md).</span></span>

## <a name=""></a><span data-ttu-id="f92ca-148"><a name="delta">使用 delta 查询跟踪更改</a></span><span class="sxs-lookup"><span data-stu-id="f92ca-148"><a name="delta">Track changes using delta query</a></span></span>

<span data-ttu-id="f92ca-149">Planner 的 delta 查询功能支持查询用户订阅的对象。</span><span class="sxs-lookup"><span data-stu-id="f92ca-149">Planner's delta query supports querying objects that the user is subscribed to.</span></span>

<span data-ttu-id="f92ca-150">用户订阅了以下对象。</span><span class="sxs-lookup"><span data-stu-id="f92ca-150">Users are subscribed to the following objects.</span></span>

| <span data-ttu-id="f92ca-151">Planner 资源类型</span><span class="sxs-lookup"><span data-stu-id="f92ca-151">Planner resource type</span></span> | <span data-ttu-id="f92ca-152">已订阅的实例</span><span class="sxs-lookup"><span data-stu-id="f92ca-152">Subscribed instances</span></span>                                                                                                                                                                                    |
| :-------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| <span data-ttu-id="f92ca-153">任务</span><span class="sxs-lookup"><span data-stu-id="f92ca-153">Tasks</span></span>                 | <ul><li><span data-ttu-id="f92ca-154">由用户创建</span><span class="sxs-lookup"><span data-stu-id="f92ca-154">Created by the user</span></span></li><li><span data-ttu-id="f92ca-155">已分配给用户</span><span class="sxs-lookup"><span data-stu-id="f92ca-155">Assigned to the user</span></span></li><li><span data-ttu-id="f92ca-156">属于用户拥有的计划</span><span class="sxs-lookup"><span data-stu-id="f92ca-156">Belong to a plan that the user owns</span></span></li><li><span data-ttu-id="f92ca-157">包含在通过计划的 **SharedWith** 集合与用户共享的计划中</span><span class="sxs-lookup"><span data-stu-id="f92ca-157">Contained in a plan shared with the user through the plan's **SharedWith** collection</span></span></li> |
| <span data-ttu-id="f92ca-158">计划</span><span class="sxs-lookup"><span data-stu-id="f92ca-158">Plans</span></span>                 | <ul><li><span data-ttu-id="f92ca-159">通过计划的 **SharedWith** 集合与用户共享</span><span class="sxs-lookup"><span data-stu-id="f92ca-159">Shared with the user through the plan's **SharedWith** collection</span></span></li></ul>                                                                                                                     |
| <span data-ttu-id="f92ca-160">Buckets</span><span class="sxs-lookup"><span data-stu-id="f92ca-160">Buckets</span></span>               | <ul><li><span data-ttu-id="f92ca-161">包含在通过计划的 **SharedWith** 集合与用户共享的计划中</span><span class="sxs-lookup"><span data-stu-id="f92ca-161">Contained in a plan shared with the user through the plan's **SharedWith** collection</span></span></li></ul>                                                                                                 |

### <a name=""></a><span data-ttu-id="f92ca-162"><a name="objectcache">填充 delta 查询的对象缓存</a></span><span class="sxs-lookup"><span data-stu-id="f92ca-162"><a name="objectcache">Populate the object cache for delta queries</a></span></span>

<span data-ttu-id="f92ca-163">如果要使用 Planner delta 查询 API，请保留用户有兴趣查看的对象的本地缓存，以便应用 delta 响应源中的更改。</span><span class="sxs-lookup"><span data-stu-id="f92ca-163">If you want to use the Planner delta query API, maintain a local cache of objects that the user is interested in observing in order to apply the changes from the delta response feed.</span></span>

<span data-ttu-id="f92ca-164">Planner delta 查询当前可以返回的 delta 有效负载对象将为以下类型：</span><span class="sxs-lookup"><span data-stu-id="f92ca-164">The delta payload objects that the Planner delta query can currently return will be of the following types:</span></span>

* [<span data-ttu-id="f92ca-165">plannerTask</span><span class="sxs-lookup"><span data-stu-id="f92ca-165">plannerTask</span></span>](plannertask.md)
* [<span data-ttu-id="f92ca-166">plannerTaskDetails</span><span class="sxs-lookup"><span data-stu-id="f92ca-166">plannerTaskDetails</span></span>](plannertaskdetails.md)
* [<span data-ttu-id="f92ca-167">plannerPlan</span><span class="sxs-lookup"><span data-stu-id="f92ca-167">plannerPlan</span></span>](plannerplan.md)
* [<span data-ttu-id="f92ca-168">plannerPlanDetails</span><span class="sxs-lookup"><span data-stu-id="f92ca-168">plannerPlanDetails</span></span>](plannerplandetails.md)
* [<span data-ttu-id="f92ca-169">plannerBucket</span><span class="sxs-lookup"><span data-stu-id="f92ca-169">plannerBucket</span></span>](plannerbucket.md)
* [<span data-ttu-id="f92ca-170">plannerAssignedToTaskBoardTaskFormat</span><span class="sxs-lookup"><span data-stu-id="f92ca-170">plannerAssignedToTaskBoardTaskFormat</span></span>](plannerassignedtotaskboardtaskformat.md)
* [<span data-ttu-id="f92ca-171">plannerBucketTaskBoardTaskFormat</span><span class="sxs-lookup"><span data-stu-id="f92ca-171">plannerBucketTaskBoardTaskFormat</span></span>](plannerbuckettaskboardtaskformat.md)
* [<span data-ttu-id="f92ca-172">plannerAssignedToTaskBoardTaskFormat</span><span class="sxs-lookup"><span data-stu-id="f92ca-172">plannerAssignedToTaskBoardTaskFormat</span></span>](plannerassignedtotaskboardtaskformat.md)

<span data-ttu-id="f92ca-173">使用资源中的相应 `GET` 方法获取要填充到本地缓存的对象初始状态。</span><span class="sxs-lookup"><span data-stu-id="f92ca-173">Use the corresponding `GET` methods on the resource to obtain the initial state of objects to be populated into the local cache.</span></span>

### <a name="differentiating-between-object-creation-and-object-modification"></a><span data-ttu-id="f92ca-174">区分对象创建和对象修改</span><span class="sxs-lookup"><span data-stu-id="f92ca-174">Differentiating between object creation and object modification</span></span>

<span data-ttu-id="f92ca-175">在某些情况下，调用方可能希望区分 Planner 的 delta 查询源中的对象创建和对象修改。</span><span class="sxs-lookup"><span data-stu-id="f92ca-175">In certain scenarios, the caller might want to distinguish between object creation and object modification within Planner's delta query feed.</span></span>

<span data-ttu-id="f92ca-176">可使用以下准则推断对象创建：</span><span class="sxs-lookup"><span data-stu-id="f92ca-176">These guidelines can be used to infer object creation:</span></span>

* <span data-ttu-id="f92ca-177">`createdBy` 属性仅出现在新创建的对象上。</span><span class="sxs-lookup"><span data-stu-id="f92ca-177">The `createdBy` property will only appear on newly created objects.</span></span>
* <span data-ttu-id="f92ca-178">新创建的 `plannerTask` 对象后面将跟随其对应的 `plannerTaskDetails` 对象。</span><span class="sxs-lookup"><span data-stu-id="f92ca-178">A newly created `plannerTask` object will be followed by its corresponding `plannerTaskDetails` object.</span></span>
* <span data-ttu-id="f92ca-179">新创建的 `plannerPlan` 对象后面将跟随其对应的 `plannerPlanDetails` 对象。</span><span class="sxs-lookup"><span data-stu-id="f92ca-179">A newly created `plannerPlan` object will be followed by its corresponding `plannerPlanDetails` object.</span></span>

### <a name="usage"></a><span data-ttu-id="f92ca-180">用法</span><span class="sxs-lookup"><span data-stu-id="f92ca-180">Usage</span></span>

<span data-ttu-id="f92ca-181">调用方期望有一个包含订阅对象的缓存。</span><span class="sxs-lookup"><span data-stu-id="f92ca-181">The caller is expected to have a cache containing subscribed objects.</span></span> <span data-ttu-id="f92ca-182">有关如何填充订阅对象的本地缓存的详细信息，请参阅[填充 delta 查询的对象缓存](#populate-the-object-cache-for-delta-queries)。</span><span class="sxs-lookup"><span data-stu-id="f92ca-182">For details about how to fill the local cache of subscribed objects, see [Populate the object cache for delta queries](#populate-the-object-cache-for-delta-queries).</span></span>

<span data-ttu-id="f92ca-183">Planner 的 delta 查询调用流如下所示：</span><span class="sxs-lookup"><span data-stu-id="f92ca-183">Planner's delta query call flow is as follows:</span></span>

1. <span data-ttu-id="f92ca-184">调用方启动 delta 同步查询，以便获取 `nextLink` 和空的更改集合。</span><span class="sxs-lookup"><span data-stu-id="f92ca-184">The caller initiates a delta sync query, obtaining a `nextLink` and an empty collection of changes.</span></span>
2. <span data-ttu-id="f92ca-185">调用方必须使用用户订阅的对象[填充 delta 查询的对象缓存](#populate-the-object-cache-for-delta-queries)，从而更新其缓存。</span><span class="sxs-lookup"><span data-stu-id="f92ca-185">The caller must [populate the object cache for delta queries](#populate-the-object-cache-for-delta-queries) with objects that the user is subscribed to, updating its cache.</span></span>
3. <span data-ttu-id="f92ca-186">调用方遵循初始 delta 同步查询中提供的 `nextLink`，以便获得自上一步以来所做的任何更改的新 `deltaLink`。</span><span class="sxs-lookup"><span data-stu-id="f92ca-186">The caller follows the `nextLink` provided in the initial delta sync query to obtain a new `deltaLink` to any changes since previous step.</span></span>
4. <span data-ttu-id="f92ca-187">调用方将返回的 delta 响应中的更改应用于其缓存中的对象。</span><span class="sxs-lookup"><span data-stu-id="f92ca-187">The caller applies the changes in the returned delta response to the objects in its cache.</span></span>
5. <span data-ttu-id="f92ca-188">调用方遵循新的 deltaLink 以获取下一个 deltaLink，以及自生成当前 `deltaLink` 以来所做的更改。</span><span class="sxs-lookup"><span data-stu-id="f92ca-188">The caller follows the new deltaLink to obtain the next deltaLink and changes since the current `deltaLink` was generated.</span></span>
6. <span data-ttu-id="f92ca-189">调用方应用更改（如果有）并等待一小段时间，然后重新执行上一步和此步骤。</span><span class="sxs-lookup"><span data-stu-id="f92ca-189">The caller applies the changes (if any) and waits a short time before rerunning the previous step and this step.</span></span>

## <a name="planner-resource-versioning"></a><span data-ttu-id="f92ca-190">Planner 资源版本控制</span><span class="sxs-lookup"><span data-stu-id="f92ca-190">Planner resource versioning</span></span>

<span data-ttu-id="f92ca-191">Planner 使用 **etag** 对所有资源进行版本控制。</span><span class="sxs-lookup"><span data-stu-id="f92ca-191">Planner versions all resources using **etags**.</span></span> <span data-ttu-id="f92ca-192">这些 **etag** 在每个资源上返回 `@odata.etag` 属性。</span><span class="sxs-lookup"><span data-stu-id="f92ca-192">These **etags** are returned with `@odata.etag` property on each resource.</span></span> <span data-ttu-id="f92ca-193">`PATCH` 和 `DELETE` 请求要求使用 `If-Match` 标头指定客户端已知的最后一个 **etag**。</span><span class="sxs-lookup"><span data-stu-id="f92ca-193">`PATCH` and `DELETE` requests require the last **etag** known by the client to be specified with a `If-Match` header.</span></span>
<span data-ttu-id="f92ca-194">如果目标更改与相同资源上的 Planner 服务接受的较新更改不冲突，则 Planner 允许对资源的旧版本进行更改。</span><span class="sxs-lookup"><span data-stu-id="f92ca-194">Planner allows changes to older versions of resources, if the intended change does not conflict with newer changes accepted by the Planner service on the same resource.</span></span> <span data-ttu-id="f92ca-195">客户端可以通过计算顺序字符串比较中的较大 **etag** 值，确定在相同的资源中，哪个 **etag** 较新。</span><span class="sxs-lookup"><span data-stu-id="f92ca-195">The clients can identify which **etag** for the same resource is newer by calculating which **etag** value is greater in ordinal string comparison.</span></span>
<span data-ttu-id="f92ca-196">每个资源都有唯一的 **etag**。</span><span class="sxs-lookup"><span data-stu-id="f92ca-196">Each resource has a unique **etag**.</span></span> <span data-ttu-id="f92ca-197">不同资源的 etag 值（包括具有包含关系的 etag 值）无法比较。</span><span class="sxs-lookup"><span data-stu-id="f92ca-197">Etag values for different resources, including those with containment relationships, cannot be compared.</span></span>
<span data-ttu-id="f92ca-198">按预期，客户端应用程序需要通过读取项的最新版本处理与 [错误代码](/graph/errors) **409** 和 **412** 相关的版本控制，并解决冲突的更改。</span><span class="sxs-lookup"><span data-stu-id="f92ca-198">The client apps are expected to handle versioning related [error codes](/graph/errors) **409** and **412** by reading the latest version of the item and resolving the conflicting changes.</span></span>

## <a name="common-planner-error-conditions"></a><span data-ttu-id="f92ca-199">常见的 Planner 错误条件</span><span class="sxs-lookup"><span data-stu-id="f92ca-199">Common Planner error conditions</span></span>

<span data-ttu-id="f92ca-200">除了适用于 Microsoft Graph 的[常规错误](/graph/errors)外，某些错误条件特定于 Planner API。</span><span class="sxs-lookup"><span data-stu-id="f92ca-200">In addition to [general errors](/graph/errors) that apply to Microsoft Graph, some error conditions are specific to the Planner API.</span></span>

### <a name="400-bad-request"></a><span data-ttu-id="f92ca-201">400 错误的请求</span><span class="sxs-lookup"><span data-stu-id="f92ca-201">400 Bad request</span></span>

<span data-ttu-id="f92ca-202">在某些常见方案中，`POST` 和 `PATCH` 请求可能会返回 400 状态代码。</span><span class="sxs-lookup"><span data-stu-id="f92ca-202">In some common scenarios, `POST` and `PATCH` requests can return a 400 status code.</span></span> <span data-ttu-id="f92ca-203">以下是一些常见原因：</span><span class="sxs-lookup"><span data-stu-id="f92ca-203">The following are some of the common causes:</span></span>

* <span data-ttu-id="f92ca-p112">开放类型属性的类型不正确，或该类型未指定，或它们不包含任何属性。例如，包含复杂值的 plannerAssignments 属性需要声明包含  值的  属性。</span><span class="sxs-lookup"><span data-stu-id="f92ca-p112">Open Type properties are not of correct types, or the type isn't specified, or they do not contain any properties. For example, [plannerAssignments](plannerassignments.md) properties with complex values need to declare `@odata.type` property with value `microsoft.graph.plannerAssignment`.</span></span>
* <span data-ttu-id="f92ca-p113">顺序提示值不具有正确格式。例如，顺序提示值被直接设置为返回到客户端的值。</span><span class="sxs-lookup"><span data-stu-id="f92ca-p113">Order hint values do not have the [correct format](planner-order-hint-format.md). For example, an order hint value is being set directly to the value returned to the client.</span></span>
* <span data-ttu-id="f92ca-p114">数据在逻辑上不一致。例如，任务的开始日期晚于任务的到期日期。</span><span class="sxs-lookup"><span data-stu-id="f92ca-p114">The data is logically inconsistent. For example, start date of task is later than due date of the task.</span></span>

### <a name="403-forbidden"></a><span data-ttu-id="f92ca-210">403 已禁止</span><span class="sxs-lookup"><span data-stu-id="f92ca-210">403 Forbidden</span></span>

<span data-ttu-id="f92ca-211">除常规错误外，当超出服务定义的限制时，Planner API 也会返回 403 状态代码。</span><span class="sxs-lookup"><span data-stu-id="f92ca-211">In addition to the general errors, the Planner API also returns the 403 status code when a service-defined limit has been exceeded.</span></span> <span data-ttu-id="f92ca-212">如果出现这种情况，错误资源类型上的 `code` 属性将标识请求超出的限制类型。</span><span class="sxs-lookup"><span data-stu-id="f92ca-212">If this is the case, the `code` property on the error resource type will indicate the type of the limit exceeded by the request.</span></span>
<span data-ttu-id="f92ca-213">以下是限制类型的可能值。</span><span class="sxs-lookup"><span data-stu-id="f92ca-213">The following are the possible values for the limit types.</span></span>

| <span data-ttu-id="f92ca-214">值</span><span class="sxs-lookup"><span data-stu-id="f92ca-214">Value</span></span>                         | <span data-ttu-id="f92ca-215">说明</span><span class="sxs-lookup"><span data-stu-id="f92ca-215">Description</span></span>                                                                                                                                                                                              |
| :---------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <span data-ttu-id="f92ca-216">MaximumProjectsOwnedByUser</span><span class="sxs-lookup"><span data-stu-id="f92ca-216">MaximumProjectsOwnedByUser</span></span>    | <span data-ttu-id="f92ca-p116">已超出组所有的最大 Plan 数限制。此限制基于 [plannerPlan](plannerplan.md) 资源上的 `owner` 属性。</span><span class="sxs-lookup"><span data-stu-id="f92ca-p116">The maximum number of Plans owned by a group limit has been exceeded. This limit is based on the `owner` property on the [plannerPlan](plannerplan.md) resource.</span></span>                                         |
| <span data-ttu-id="f92ca-219">MaximumProjectsSharedWithUser</span><span class="sxs-lookup"><span data-stu-id="f92ca-219">MaximumProjectsSharedWithUser</span></span> | <span data-ttu-id="f92ca-p117">已超出与用户共享的最大 Plan 数限制。此限制基于 [plannerPlanDetails](plannerplandetails.md) 资源上的 `sharedWith` 属性。</span><span class="sxs-lookup"><span data-stu-id="f92ca-p117">The maximum number of Plans shared with a user limit has been exceeded.  This limit is based on the `sharedWith` property on the [plannerPlanDetails](plannerplandetails.md) resource.</span></span>                   |
| <span data-ttu-id="f92ca-222">MaximumTasksCreatedByUser</span><span class="sxs-lookup"><span data-stu-id="f92ca-222">MaximumTasksCreatedByUser</span></span>     | <span data-ttu-id="f92ca-p118">已超出用户创建的最大 Task 数限制。此限制基于 [plannerTask](plannertask.md) 资源上的 `createdBy` 属性。</span><span class="sxs-lookup"><span data-stu-id="f92ca-p118">The maximum number of Tasks created by a user limit has been exceeded. This limit is based on the `createdBy` property on the [plannerTask](plannertask.md) resource.</span></span>                                    |
| <span data-ttu-id="f92ca-225">MaximumTasksAssignedToUser</span><span class="sxs-lookup"><span data-stu-id="f92ca-225">MaximumTasksAssignedToUser</span></span>    | <span data-ttu-id="f92ca-p119">已超出分配给用户的最大 Task 数限制。此限制基于 [plannerTask](plannertask.md) 资源上的 `assignments` 属性。</span><span class="sxs-lookup"><span data-stu-id="f92ca-p119">The maximum number of Tasks assigned to a user limit has been exceeded. This limit is based on the `assignments` property on the [plannerTask](plannertask.md) resource.</span></span>                                 |
| <span data-ttu-id="f92ca-228">MaximumTasksInProject</span><span class="sxs-lookup"><span data-stu-id="f92ca-228">MaximumTasksInProject</span></span>         | <span data-ttu-id="f92ca-p120">已超出 Plan 中的最大 Task 数限制。此限制基于 [plannerTask](plannertask.md) 资源上的 `planId` 属性。</span><span class="sxs-lookup"><span data-stu-id="f92ca-p120">The maximum number of Tasks in a Plan limit has been exceeded. This limit is based on the `planId` property on the [plannerTask](plannertask.md) resource.</span></span>                                               |
| <span data-ttu-id="f92ca-231">MaximumActiveTasksInProject</span><span class="sxs-lookup"><span data-stu-id="f92ca-231">MaximumActiveTasksInProject</span></span>   | <span data-ttu-id="f92ca-p121">已超出 Plan 中未完成的最大 Task 数限制。此限制基于 [plannerTask](plannertask.md) 资源上的 `planId` 和 `percentComplete` 属性。</span><span class="sxs-lookup"><span data-stu-id="f92ca-p121">The maximum number of Tasks that aren't completed in a Plan limit has been exceeded. This limit is based on the `planId` and `percentComplete` properties on the [plannerTask](plannertask.md) resource.</span></span> |
| <span data-ttu-id="f92ca-234">MaximumBucketsInProject</span><span class="sxs-lookup"><span data-stu-id="f92ca-234">MaximumBucketsInProject</span></span>       | <span data-ttu-id="f92ca-p122">已超出 Plan 中的最大 Bucket 数限制。此限制基于 [plannerBucket](plannerbucket.md) 资源上的 `planId` 属性。</span><span class="sxs-lookup"><span data-stu-id="f92ca-p122">The maximum number of Buckets in a Plan limit has been exceeded. This limit is based on the `planId` property on the [plannerBucket](plannerbucket.md) resource.</span></span>                                         |
| <span data-ttu-id="f92ca-237">MaximumUsersSharedWithProject</span><span class="sxs-lookup"><span data-stu-id="f92ca-237">MaximumUsersSharedWithProject</span></span> | <span data-ttu-id="f92ca-238">[plannerPlanDetails](plannerplandetails.md) 资源上的 `sharedWith` 属性包含的值过多。</span><span class="sxs-lookup"><span data-stu-id="f92ca-238">The `sharedWith` property on the [plannerPlanDetails](plannerplandetails.md) resource contains too many values.</span></span>                                                                                          |
| <span data-ttu-id="f92ca-239">MaximumReferencesOnTask</span><span class="sxs-lookup"><span data-stu-id="f92ca-239">MaximumReferencesOnTask</span></span>       | <span data-ttu-id="f92ca-240">[plannerTaskDetails](plannertaskdetails.md) 资源上的 `references` 属性包含的值过多。</span><span class="sxs-lookup"><span data-stu-id="f92ca-240">The `references` property on the [plannerTaskDetails](plannertaskdetails.md) resource contains too many values.</span></span>                                                                                          |
| <span data-ttu-id="f92ca-241">MaximumChecklistItemsOnTask</span><span class="sxs-lookup"><span data-stu-id="f92ca-241">MaximumChecklistItemsOnTask</span></span>   | <span data-ttu-id="f92ca-242">[plannerTaskDetails](plannertaskdetails.md) 资源上的 `checklist` 属性包含的值过多。</span><span class="sxs-lookup"><span data-stu-id="f92ca-242">The `checklist` property on the [plannerTaskDetails](plannertaskdetails.md) resource contains too many values.</span></span>                                                                                           |
| <span data-ttu-id="f92ca-243">MaximumAssigneesInTasks</span><span class="sxs-lookup"><span data-stu-id="f92ca-243">MaximumAssigneesInTasks</span></span>       | <span data-ttu-id="f92ca-244">[plannerTask](plannertask.md) 资源上的 `assignments` 属性包含的值过多。</span><span class="sxs-lookup"><span data-stu-id="f92ca-244">The `assignments` property on the [plannerTask](plannertask.md) resource contains too many values.</span></span>                                                                                                       |
| <span data-ttu-id="f92ca-245">MaximumFavoritePlansForUser</span><span class="sxs-lookup"><span data-stu-id="f92ca-245">MaximumFavoritePlansForUser</span></span>   | <span data-ttu-id="f92ca-246">[plannerUser](planneruser.md) 资源上的 `favoritePlanReferences` 属性包含的值过多。</span><span class="sxs-lookup"><span data-stu-id="f92ca-246">The `favoritePlanReferences` property on the [plannerUser](planneruser.md) resource contains too many values.</span></span>                                                                                            |
| <span data-ttu-id="f92ca-247">MaximumRecentPlansForUser</span><span class="sxs-lookup"><span data-stu-id="f92ca-247">MaximumRecentPlansForUser</span></span>     | <span data-ttu-id="f92ca-248">[plannerUser](planneruser.md) 资源上的 `recentPlanReferences` 属性包含的值过多。</span><span class="sxs-lookup"><span data-stu-id="f92ca-248">The `recentPlanReferences` property on the [plannerUser](planneruser.md) resource contains too many values.</span></span>                                                                                              |
| <span data-ttu-id="f92ca-249">MaximumContextsOnPlan</span><span class="sxs-lookup"><span data-stu-id="f92ca-249">MaximumContextsOnPlan</span></span>         | <span data-ttu-id="f92ca-250">[plannerPlan](plannerplan.md) 资源上的 `contexts` 属性包含的值过多。</span><span class="sxs-lookup"><span data-stu-id="f92ca-250">The `contexts` property on the [plannerPlan](plannerplan.md) resource contains too many values.</span></span>                                                                                                          |
| <span data-ttu-id="f92ca-251">MaximumPlannerPlans</span><span class="sxs-lookup"><span data-stu-id="f92ca-251">MaximumPlannerPlans</span></span>       | <span data-ttu-id="f92ca-252">组已包含一个计划。</span><span class="sxs-lookup"><span data-stu-id="f92ca-252">The group already contains a Plan.</span></span> <span data-ttu-id="f92ca-253">目前，组只能包含一个计划。</span><span class="sxs-lookup"><span data-stu-id="f92ca-253">Currently, groups can only contain one Plan.</span></span> <span data-ttu-id="f92ca-254">**注意：** 某些 Microsoft 应用程序可能超出此限制。</span><span class="sxs-lookup"><span data-stu-id="f92ca-254">**Note:** Some Microsoft apps can exceed this limit.</span></span> <span data-ttu-id="f92ca-255">将来，我们会将此功能扩展到所有应用程序。</span><span class="sxs-lookup"><span data-stu-id="f92ca-255">In the future, we will extend this capability to all apps.</span></span>                                                                                                      |

### <a name="412-precondition-failed"></a><span data-ttu-id="f92ca-256">412 前提条件不满足</span><span class="sxs-lookup"><span data-stu-id="f92ca-256">412 Precondition Failed</span></span>

<span data-ttu-id="f92ca-257">所有 Planer API `POST`、`PATCH` 和 `DELETE` 请求都需要使用受请求约束的资源的最后一个已知 etag 值指定 `If-Match` 标头。</span><span class="sxs-lookup"><span data-stu-id="f92ca-257">All Planer API `POST`, `PATCH`, and `DELETE` requests require the `If-Match` header to be specified with the last known etag value of the resource that is subject to the request.</span></span>
<span data-ttu-id="f92ca-258">如果请求中指定的 etag 值不再匹配服务中资源的版本，也会返回 412 状态代码。</span><span class="sxs-lookup"><span data-stu-id="f92ca-258">The 412 status code can also be returned if the etag value specified in the request no longer matches a version of the resource in the service.</span></span> <span data-ttu-id="f92ca-259">在这种情况下，客户端应该再次读取资源并获取新的 etag。</span><span class="sxs-lookup"><span data-stu-id="f92ca-259">In this case, the clients should read the resource again and get a new etag.</span></span>

## <a name="whats-new"></a><span data-ttu-id="f92ca-260">最近更新</span><span class="sxs-lookup"><span data-stu-id="f92ca-260">What's new</span></span>
<span data-ttu-id="f92ca-261">了解此 API 集的[最新功能和更新](/graph/whats-new-overview)。</span><span class="sxs-lookup"><span data-stu-id="f92ca-261">Find out about the [latest new features and updates](/graph/whats-new-overview) for this API set.</span></span>

